description: ActiveRecall and SpacedRepetition for TiddlyWiki, fishing with Anki algorithm.
tags: $:/tags/PageControls
title: $:/plugins/oflg/fishing/Buttons/fishing

<$vars
today=<<now "YYYY0MM0DD">>
>
<!-- creat fishingButton and countReminder -->
<$button popup=<<qualify "$:/state/popup/more">> tooltip="fishing" aria-label="fishing" class=<<tv-config-toolbar-class>>  selectedClass="tc-selected">
{{$:/plugins/oflg/fishing/icon}}<$reveal default={{{ [all[shadows+tiddlers]tag[Fish]has[due]!days:due[-1]count[]] }}} type="gt" text="0" animate="yes"><span style="font-size:5px;color:red;"><$text text={{{ [all[shadows+tiddlers]tag[Fish]has[due]!days:due[-1]count[]] }}}/></span></$reveal><$reveal default={{{ [all[shadows+tiddlers]tag[Fish]has[due]sameday:due<today>count[]] }}} type="gt" text="0" animate="yes"><span style="font-size:5px;color:green;"><$text text={{{ [all[shadows+tiddlers]tag[Fish]has[due]sameday:due<today>count[]] }}}/></span></$reveal>
</$button>

<!-- creat fishpond -->
<$reveal state=<<qualify "$:/state/popup/more">> type="popup" position="below" animate="yes">
<div class="tc-drop-down">
<$set name="extraFilter" value={{$:/temp/search}} emptyValue="[tag[Fish]]">
<$list filter="[[$:/plugins/oflg/fishing/fishpond]indexes[]sortby[overdue due undue old new all]]" variable="fishpond">
<$vars
fishFilter={{{ [[$:/plugins/oflg/fishing/fishpond]getindex<fishpond>] }}}
>
<$vars
tooltip={{{ [<fishpond>addprefix[revise ]addsuffix[ tiddlers]] }}}
fishcount={{{ [subfilter<fishFilter>subfilter<extraFilter>count[]] }}}
fish={{{ [subfilter<fishFilter>subfilter<extraFilter>first[]] }}}
fishfold={{{ [subfilter<fishFilter>subfilter<extraFilter>first[]addprefix[$:/state/folded/]] }}}
>
<$button class="tc-btn-invisible tc-tiddlylink" style="padding:0 15px;" tooltip=<<tooltip>> >
<<fishpond>> : <<fishcount>>
<$action-setfield $tiddler="$:/temp/fishing" fishpond=<<fishpond>> fish=<<fish>> fishfold=<<fishfold>>/>
<$action-setfield $tiddler=<<fishfold>> text="hide"/>
<$action-navigate $to=<<fish>>/>
</$button>
</$vars>
</$vars>
</$list>
</$set>
</div>
</$reveal>

</$vars>